import{_ as t}from"./CaNb7KN_.js";import{c as r,w as p,o as c,a as l,b as a}from"./Du-K4N_a.js";const m={__name:"opensearch",setup(h){const e={title:"Chrome 中的 “Tab to Search” 与 Open Search",description:"Chrome 中的 “Tab to Search” 与 Open Search",keywords:"原创,技巧",pathname:"opensearch",translation:null,create_time:"2017-05-08",prev:{title:"[译] GraphQL 的庐山真面目",pathname:"so-whats-this-graphql-thing-i-keep-hearing-about"},next:{title:"[译] 浏览器中的 ES6 module 实现",pathname:"es-modules-in-browsers"}};return(o,s)=>{const n=t;return c(),r(n,{data:e},{default:p(()=>[...s[0]||(s[0]=[l("h2",null,"描述",-1),l("p",null,"在 Chrome 中新建标签页，输入网址的时候，浏览器会根据书签、历史记录进行自动补全，通过 Tab 键可以在浏览器提供的补全选项中切换。",-1),l("p",null,[a("有时可以发现，点击 Tab 的时候，地址栏右侧会出现“按 "),l("code",null,"tab"),a(" 键可通过 XX 进行搜索”的提示。")],-1),l("p",null,[l("img",{loading:"lazy",src:"https://ww3.sinaimg.cn/large/006tNbRwly1fffki13mxvj30z80aw0tu.jpg",alt:""})],-1),l("p",null,"再次点击 Tab，地址栏中文字，就变成了一段蓝色文字：“使用 XX 搜索”。",-1),l("p",null,[l("img",{loading:"lazy",src:"https://ww3.sinaimg.cn/large/006tNbRwly1fffkisv96kj30t605idg5.jpg",alt:""})],-1),l("p",null,"这时候就可以直接在地址栏中输入你要搜索的关键词，然后点击回车键，页面就会直接跳转到搜索页。",-1),l("p",null,[l("img",{loading:"lazy",src:"https://ww2.sinaimg.cn/large/006tNbRwly1fffkjwhpavj316g0piq5c.jpg",alt:""})],-1),l("p",null,"很多网站都能通过这种方式进行快捷搜索。常用的如谷歌、百度这些搜索引擎，后来发现，知乎、掘金、Github 等等网站也能实现。",-1),l("p",null,"奇舞周刊网站提供了技术文章的搜索功能，和一般搜索有所不同的是，奇舞周刊的 url 是将搜索词放在 url 的 hash 部分的。这样是否也能实现呢？",-1),l("h2",null,"功能实现",-1),l("p",null,"带着这个问题，首先通过搜索引擎找答案。找到了，是一个叫做 OpenSearch 的方案。",-1),l("p",null,[a("解决方案很简单，在 HTML 文档的 "),l("code",null,"head"),a(" 部分添加一个 "),l("code",null,"<link>"),a(" 标签：")],-1),l("pre",null,[l("code",{class:"hljs lang-html"},[l("span",{class:"hljs-tag"},[a("<"),l("span",{class:"hljs-name"},"link"),a(`
    `),l("span",{class:"hljs-attr"},"rel"),a("="),l("span",{class:"hljs-string"},'"search"'),a(`
    `),l("span",{class:"hljs-attr"},"href"),a("="),l("span",{class:"hljs-string"},'"/opensearch.xml"'),a(`
    `),l("span",{class:"hljs-attr"},"type"),a("="),l("span",{class:"hljs-string"},'"application/opensearchdescription+xml"'),a(`
/>`)]),a(`
`)])],-1),l("p",null,"接着创建一个 XML 文件。文件内容如下：",-1),l("pre",null,[l("code",{class:"hljs lang-xml"},[l("span",{class:"hljs-tag"},[a("<"),l("span",{class:"hljs-name"},"OpenSearchDescription"),a(),l("span",{class:"hljs-attr"},"xmlns"),a("="),l("span",{class:"hljs-string"},'"http://a9.com/-/spec/opensearch/1.1/"'),a(">")]),a(`
    `),l("span",{class:"hljs-tag"},[a("<"),l("span",{class:"hljs-name"},"ShortName"),a(">")]),a("奇舞周刊搜索"),l("span",{class:"hljs-tag"},[a("</"),l("span",{class:"hljs-name"},"ShortName"),a(">")]),a(`
    `),l("span",{class:"hljs-tag"},[a("<"),l("span",{class:"hljs-name"},"Description"),a(">")]),a("奇舞周刊为您提供技术文章搜索支持。"),l("span",{class:"hljs-tag"},[a("</"),l("span",{class:"hljs-name"},"Description"),a(">")]),a(`
    `),l("span",{class:"hljs-tag"},[a("<"),l("span",{class:"hljs-name"},"Url"),a(),l("span",{class:"hljs-attr"},"type"),a("="),l("span",{class:"hljs-string"},'"text/html"'),a(),l("span",{class:"hljs-attr"},"method"),a("="),l("span",{class:"hljs-string"},'"get"'),a(),l("span",{class:"hljs-attr"},"template"),a("="),l("span",{class:"hljs-string"},'"https://weekly.75team.com/search.html#{searchTerms}"'),a("/>")]),a(`
`),l("span",{class:"hljs-tag"},[a("</"),l("span",{class:"hljs-name"},"OpenSearchDescription"),a(">")]),a(`
`)])],-1),l("p",null,[a("上面这段是最简单的配置。"),l("code",null,"ShortName"),a(" 相当于前面举例中的 “XX”。"),l("code",null,"Description"),a(" 字段目前尚未在实际操作的 UI 呈现中看到。"),l("code",null,"Url"),a(" 字段的关键在 "),l("code",null,"template"),a(" 属性，该属性值是搜索页地址模板。")],-1),l("p",null,[a("需要注意的是，这个 XML 文档必须放在当前域名下的 server 上。关于 OpenSearch XML 文档的各个地址配置，请参考 "),l("a",{href:"http://www.opensearch.org/Specifications/OpenSearch/1.1#OpenSearch_description_document",target:"_blank",rel:"noopener"},"OpenSearch 规范"),a("。")],-1),l("h2",null,"通过 Form 实现",-1),l("p",null,[a("此外，根据 "),l("a",{href:"http://dev.chromium.org/tab-to-search",target:"_blank",rel:"noopener"},"Chromium 的文档"),a("描述，还有一种方式可以实现 “Tab to search”，即当网站中存在一个用户提交的表单时，Chrome 会自动将该网站添加到可搜索站点列表中。该表单必须满足以下几点条件：")],-1),l("ul",null,[l("li",null,"必须以 GET 方式提交；"),l("li",null,"提交目标是 HTTP 地址；"),l("li",null,[a("没有 JavaScript 脚本处理表单的 "),l("code",null,"onsubmit"),a("；")]),l("li",null,[a('只能有一个 type="text" 的 '),l("code",null,"input"),a(" 元素；")]),l("li",null,"不包含 password、file、textarea 等元素；"),l("li",null,[a("其他 "),l("code",null,"input"),a(" 元素必须保持默认状态。")])],-1),l("p",null,[a("最后需要注意一点，无论是哪种方式，"),l("strong",null,"在地址栏中选择的网址不能带有路径"),a("，这时候才能完成 “Tab to search” 的任务。")],-1),l("p",null,"更多信息，请查阅参考文档。",-1),l("h2",null,"References",-1),l("ul",null,[l("li",null,[l("a",{href:"http://dev.chromium.org/tab-to-search",target:"_blank",rel:"noopener"},"chromium.org - Tab to Search")]),l("li",null,[l("a",{href:"http://www.wikiwand.com/en/OpenSearch",target:"_blank",rel:"noopener"},"wikiwand.com - OpenSearch")]),l("li",null,[l("a",{href:"http://www.opensearch.org/Specifications/OpenSearch/1.1#OpenSearch_description_document",target:"_blank",rel:"noopener"},"opensearch.org - OpenSearch Description")]),l("li",null,[l("a",{href:"https://www.zhihu.com/question/28018277",target:"_blank",rel:"noopener"},"知乎问答 - Chrome 是如何判断一个网站是搜索引擎的?")])],-1)])]),_:1})}}};export{m as default};
