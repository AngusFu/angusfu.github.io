import{_ as t}from"./BV7Yc4PX.js";import{c as u,w as a,o as c,a as l,b as n}from"./B1kHp8qp.js";import"./8oskhlv7.js";const m={__name:"problems-with-firefox",setup(p){const s={title:"近来在Firefox上遇到的一些坑",description:"近来在Firefox上遇到的一些坑",keywords:"原创,开发心得",pathname:"problems-with-firefox",translation:null,create_time:"2016-03-12",prev:{title:"react-native 开发 App 手记",pathname:"app-with-react-native"},next:{title:"Chrome和Firefox下的网页截图",pathname:"screen-shot-upload"}};return(r,e)=>{const o=t;return c(),u(o,{data:s},{default:a(()=>[...e[0]||(e[0]=[l("p",null,[n("因为工作一年多以来，做的工作基本都是和 "),l("code",null,"webkit"),n(" 系列打交道。")],-1),l("p",null,[n("先是做m站，后来做了两个 "),l("code",null,"app"),n(" 内嵌的 "),l("code",null,"hybrid"),n(" 项目，从来只考虑 "),l("code",null,"webkit"),n(" 前缀和相关的伪类。")],-1),l("p",null,[n("最近四个多月开始做内部的管理系统，写写样式，偶尔做个 "),l("code",null,"calendar"),n("、"),l("code",null,"tree"),n(" 之类的组件，所有的基本只考虑新版 "),l("code",null,"Chrome"),n("。从来没考虑别的问题。")],-1),l("p",null,[n("最近在帮人解决 "),l("code",null,"firefox"),n(" 下的一些兼容问题。"),l("code",null,"QA"),n(" 妹纸提交了一堆 "),l("code",null,"“bug”"),n("。"),l("code",null,"Bug"),n("列表让人看了头疼，还有点心虚。囧。")],-1),l("p",null,[n("按部就班，先打开控制台。一番研究，发现不少 "),l("code",null,"“bug”"),n(" 都是样式的问题，并不是脚本兼容做得不好。")],-1),l("p",null,[n("下面就细数下最近发现的一些 "),l("code",null,"bug"),n("，算是做个备忘。以后还是得注意啊。")],-1),l("h2",null,[n("一）还在用 "),l("strong",null,"background-position-x"),n(" 吗")],-1),l("p",null,[n("以前看一些CSS规范，反复强调不要使用 "),l("code",null,"background-position-x"),n(" 之类的属性。")],-1),l("p",null,[n("如"),l("a",{href:"https://github.com/fex-team/styleguide/blob/master/css.md#46-2d-位置",target:"_blank",rel:"noopener"},[n("百度"),l("code",null,"FEX")]),n("就指出：")],-1),l("blockquote",null,[l("p",null,"** 4.6 2D 位置** [强制] 必须同时给出水平和垂直方向的位置。")],-1),l("pre",null,[l("code",{class:"hljs lang-css"},[l("span",{class:"hljs-comment"},"/* good */"),n(`
`),l("span",{class:"hljs-selector-tag"},"body"),n(` {
    `),l("span",{class:"hljs-attribute"},"background-position"),n(": center top; "),l("span",{class:"hljs-comment"},"/* 50% 0% */"),n(`
}

`),l("span",{class:"hljs-comment"},"/* bad */"),n(`
`),l("span",{class:"hljs-selector-tag"},"body"),n(` {
    `),l("span",{class:"hljs-attribute"},"background-position"),n(": top; "),l("span",{class:"hljs-comment"},"/* 50% 0% */"),n(`
}
`)])],-1),l("p",null,"一直以来恪守这个规则，但并没有深究原因。",-1),l("p",null,[n("直到这次，真正遇到了问题。才在控制台上发现，原来 "),l("code",null,"background-position-x"),n(" 在 "),l("code",null,"Firefox"),n(" 下面是"),l("strong",null,"无效"),n("的！！！")],-1),l("h2",null,"二）咦，为嘛还没开始输入文本框就验证变红了？",-1),l("p",null,"第二个问题。",-1),l("p",null,"项目有个修改密码的表单。验证不通过的话，输入框会加上红色的边框。",-1),l("p",null,[n("然后 "),l("code",null,"QA"),n(" 妹纸在描述中说的是：")],-1),l("blockquote",null,[l("p",null,[l("code",null,"firefox"),n(" 浏览器中，修改密码页面，输入框中不输入任何字符，输入框颜色也是红的 ")])],-1),l("p",null,"我还以为又是哪里的js写得不对呢。找了半天，还是决定从样式入手。",-1),l("p",null,[l("code",null,"Firefox"),n(" 的调试工具面板里，似乎只列出了样式表中的样式。浏览器默认样式的值，很难找到。我只能一点点试验。")],-1),l("p",null,[n("最后发现，"),l("code",null,"input"),n(" 输入框好像都带了个 "),l("code",null,"required"),n(" 属性。这是 "),l("code",null,"HTML5"),n(" 里表示表单元素必填的属性。莫非问题出在这里？试着删除了这个属性，果然解决了。")],-1),l("p",null,[n("其实，这红色的边框，并不是 "),l("code",null,"border"),n("，而是 "),l("code",null,"box-shadow"),n(" 啊。")],-1),l("p",null,[n("最后得到解决方案是加上这段 "),l("code",null,"CSS"),n("：")],-1),l("pre",null,[l("code",{class:"hljs lang-css"},[l("span",{class:"hljs-selector-tag"},"input"),l("span",{class:"hljs-selector-pseudo"},":required"),l("span",{class:"hljs-selector-pseudo"},":invalid"),n(` {
    `),l("span",{class:"hljs-attribute"},"box-shadow"),n(`: none;
}
`)])],-1),l("h2",null,[n("三）我擦，明明写了 "),l("code",null,"outline: 0 "),n("可是然并卵啊")],-1),l("p",null,[l("code",null,"QA"),n("妹纸还反映，登录、注册等视图的各种按钮，在 "),l("code",null,"Firefox"),n(" 怎么点击之后，会出现黑色的边框啊？")],-1),l("p",null,[n("啥？难道写代码的前端哥们儿不知道在 "),l("code",null,":active"),n("、"),l("code",null,":focus"),n(" 等状态下写个 "),l("code",null,"outline:0"),n(" 啊？这不科学。")],-1),l("p",null,"于是又开始了神奇的探(gu)索(ge)之旅。",-1),l("p",null,[n("这次得到的答案是，这黑色的细线还真不是 "),l("code",null,"outline"),n("。这是一个奇怪的伪类，"),l("code",null,"::-moz-focus-inner"),n("。简直哭死在键盘上。")],-1),l("p",null,"于是，下面这段代码解决问题：",-1),l("pre",null,[l("code",{class:"hljs lang-css"},[l("span",{class:"hljs-selector-tag"},"button"),n(`::-moz-focus-inner,
input[type=`),l("span",{class:"hljs-string"},'"reset"'),n(`]::-moz-focus-inner,
input[type=`),l("span",{class:"hljs-string"},'"button"'),n(`]::-moz-focus-inner,
input[type=`),l("span",{class:"hljs-string"},'"submit"'),n(`]::-moz-focus-inner,
input[type=`),l("span",{class:"hljs-string"},'"file"'),n("] > input[type="),l("span",{class:"hljs-string"},'"button"'),n(`]::-moz-focus-inner {
    `),l("span",{class:"hljs-attribute"},"border-color"),n(`: transparent;
}
`)])],-1),l("h2",null,"最后，还有些其他的",-1),l("ul",null,[l("li",null,[l("p",null,[n("还有什么 "),l("code",null,"clipboardData"),n(" 截图粘贴的问题，见上一篇: "),l("a",{href:"https://segmentfault.com/a/1190000004584071",target:"_blank",rel:"noopener"},"【在网页中获取截图数据】Chrome和Firefox下的实战经验"),n("；")])]),l("li",null,[l("p",null,"还有些东西，当时写到注释中了，忘了。。")])],-1),l("p",null,"TO BE CONTINUED...",-1)])]),_:1})}}};export{m as default};
