import{_ as o}from"./BV7Yc4PX.js";import{c as r,w as p,o as c,a,b as t}from"./B1kHp8qp.js";import"./8oskhlv7.js";const j={__name:"jquery-ajax-formdata",setup(u){const l={title:"使用 jQuery.ajax 上传带文件的表单",description:"使用 jQuery.ajax 上传带文件的表单",keywords:"JavaScript,原创,jQuery",pathname:"jquery-ajax-formdata",translation:null,create_time:"2016-10-29",prev:{title:"算法学习：插入排序",pathname:"algo-insertion-sort"},next:{title:"JavaScript Weekly 307 阅读笔记",pathname:"javascript-weekly-307"}};return(s,e)=>{const n=o;return c(),r(n,{data:l},{default:p(()=>[...e[0]||(e[0]=[a("p",null,"今天帮人看代码的时候，遇到一点小问题。使用 jQuery 上传带文件的表单时，会有些问题。",-1),a("p",null,[t("首先，因为使用的是 FormData，所以必须在传入 "),a("code",null,"$.ajax"),t(" 的参数中配置 "),a("code",null,"processData: false"),t("。")],-1),a("p",null,[t("否则将会抛出 "),a("code",null,"Illegal invocation"),t(" 的异常，因为 jQuery 默认是会对传入的 data 字段的数据进行处理的。")],-1),a("p",null,[a("a",{href:"http://api.jquery.com/jQuery.ajax/",target:"_blank",rel:"noopener"},"官方文档"),t("是这么解释的：")],-1),a("p",null,[a("img",{loading:"lazy",src:"https://p3.ssl.qhimg.com/t01d7c364142dff02d8.png",alt:""})],-1),a("p",null,[t("其次，注意请求的 "),a("code",null,"Content-Type"),t(" 首部，默认是 "),a("code",null,"application/x-www-form-urlencoded; charset=UTF-8"),t("，也就是我们通常见的 “a=A&b=B” 这种格式。但使用 FormData 时，就不行了。")],-1),a("p",null,[t("对参数添加 "),a("code",null,"contentType 字段"),t("，将其值设置为 "),a("code",null,"false"),t(" 即可。如果 jQuery 版本小于 1.6，则手动设置为 "),a("code",null,"multipart/form-data"),t("。具体说明请见文档说明：")],-1),a("p",null,[a("img",{loading:"lazy",src:"https://p3.ssl.qhimg.com/t0119601cbcb3c8db14.png",alt:""})],-1),a("p",null,[t("我以前通常都是使用原生的 "),a("code",null,"XMLHttpRequest"),t("，所以倒也没有遇到过这种问题。既然遇到了，就得解决。因此记录下来，以备日后查找。")],-1)])]),_:1})}}};export{j as default};
