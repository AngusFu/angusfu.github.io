import{_ as t}from"./Bm2Oy-cY.js";import{c,w as p,o,a as l,b as s}from"./YobvFIQM.js";const w={__name:"ts-note-on-global-reference",setup(r){const n={title:"笔记：TypeScript 中引用全局变量",keywords:"原创,TypeScript",pathname:"ts-note-on-global-reference",translation:null,create_time:"2016-09-08",prev:{title:"[译] 函数式 TypeScript",pathname:"functional-refactor-typescript"},next:{title:"[译] 让人倾倒的 11 个 npm trick",pathname:"eleven-npm-tricks-that-will-knock-your-wombat-socks-off"}};return(u,a)=>{const e=t;return o(),c(e,{data:n},{default:p(()=>[...a[0]||(a[0]=[l("p",null,"朋友的朋友，最近的一个项目使用了 angular.js，是使用 typescript 开发的。",-1),l("p",null,"让我惊奇的是，竟然还是使用 1.2 版本。",-1),l("p",null,[s("项目还引用了一个外部 js（没有现成的 "),l("code",null,".d.ts"),s(" 文件可用）。这个 js 文件暴露了一个全局变量，需要在 ts 文件中调用。暂且命名为 "),l("code",null,"ClassOutOfTS"),s("。")],-1),l("p",null,[s("那么问题来了。在 ts 中直接调用 "),l("code",null,"new ClassOutOfTS()"),s(" 会引起编译报错，因为 ts 编译器根本就找不到 "),l("code",null,"ClassOutOfTS"),s("的定义。")],-1),l("p",null,[s("想想实在没什么好办法。那就自己去写个 "),l("code",null,".d.ts"),s(" 文件好啦。")],-1),l("p",null,"等等，好像不对。",-1),l("p",null,[s("我最近两周的空闲时间在看 angular2，好像有个例子中，出现过对 "),l("code",null,"window"),s(" 特殊处理的情况。")],-1),l("p",null,"查查代码，还真有。废话少说，直接上代码：",-1),l("pre",null,[l("code",{class:"hljs lang-typescript"},[l("span",{class:"hljs-keyword"},"var"),s(),l("span",{class:"hljs-attr"},"ins"),s(":"),l("span",{class:"hljs-built_in"},"any"),s(" = (<"),l("span",{class:"hljs-built_in"},"any"),s(">"),l("span",{class:"hljs-variable language_"},"window"),s(")."),l("span",{class:"hljs-title class_"},"ClassOutOfTS"),s(`();
`)])],-1),l("p",null,"虽然这办法很黑，可是也没什么更好的了。",-1),l("p",null,[s("简单解释下。上面这行代码中，关键部分是 "),l("code",null,"<any>window"),s(" 这一句。"),l("code",null,"<any>"),s(" 在这里的作用是强制类型转换。")],-1),l("p",null,"编译器并不知晓 window 下面有哪些属性、方法。但强制转换成 any 类型之后，就不会报错了。",-1),l("p",null,"单记录下。以备不时之需。",-1),l("h2",null,"2016-10-20 Update",-1),l("p",null,"另外一种类似的办法是，在当前文件再 declare 一下。",-1),l("pre",null,[l("code",{class:"hljs lang-typescript"},[l("span",{class:"hljs-keyword"},"declare"),s(),l("span",{class:"hljs-keyword"},"const"),s(),l("span",{class:"hljs-variable language_"},"window"),s(`;
`),l("span",{class:"hljs-keyword"},"var"),s(),l("span",{class:"hljs-attr"},"ins"),s(": "),l("span",{class:"hljs-built_in"},"any"),s(" = "),l("span",{class:"hljs-variable language_"},"window"),s("."),l("span",{class:"hljs-title class_"},"ClassOutOfTS"),s(`();
`)])],-1)])]),_:1})}}};export{w as default};
